# Спецификация helper функций для работы с номером телефона

## Общее описание

Helper функции для работы с номером телефона предназначены для:
1. Валидации номера телефона
2. Извлечения 10 цифр из номера телефона
3. Форматирования номера телефона для отображения
4. Проверки корректности номера телефона

## Функции

### 1. extractDigits(phone)

#### Описание
Извлекает 10 цифр из номера телефона в любом формате.

#### Параметры
- phone (string): Номер телефона в любом формате

#### Возвращаемое значение
- string: 10 цифр номера телефона или null, если не удалось извлечь

#### Примеры
```php
extractDigits("+79219245228") // "9219245228"
extractDigits("89219245228")  // "9219245228"
extractDigits("9219245228")   // "9219245228"
extractDigits("921-924-52-28") // "9219245228"
extractDigits("invalid")      // null
```

### 2. validatePhone(phone)

#### Описание
Проверяет корректность номера телефона.

#### Параметры
- phone (string): Номер телефона в любом формате

#### Возвращаемое значение
- boolean: true, если номер корректный, false в противном случае

#### Правила валидации
- Номер должен содержать ровно 10 цифр после извлечения
- Первые цифры должны соответствовать российским кодам операторов
- Номер не должен содержать недопустимых последовательностей

### 3. formatPhone(phone)

#### Описание
Форматирует номер телефона для отображения.

#### Параметры
- phone (string): Номер телефона в любом формате

#### Возвращаемое значение
- string: Отформатированный номер телефона или исходную строку, если форматирование невозможно

#### Примеры
```php
formatPhone("+79219245228") // "+7 (921) 924-52-28"
formatPhone("89219245228")  // "+7 (921) 924-52-28"
formatPhone("9219245228")   // "+7 (921) 924-52-28"
formatPhone("invalid")      // "invalid"
```

### 4. isValidRussianPhone(phone)

#### Описание
Проверяет, является ли номер телефона действительным российским номером.

#### Параметры
- phone (string): Номер телефона в любом формате

#### Возвращаемое значение
- boolean: true, если номер является действительным российским номером, false в противном случае

#### Правила проверки
- Номер должен начинаться с кода российского оператора (900-999)
- Номер должен содержать ровно 10 цифр после извлечения

## JavaScript аналоги

Аналогичные функции должны быть реализованы на JavaScript для использования на фронтенде:

### 1. extractDigits(phone)

### 2. validatePhone(phone)

### 3. formatPhone(phone)

### 4. isValidRussianPhone(phone)

## Использование

### В PHP
```php
use App\Helpers\PhoneHelper;

$phone = "+79219245228";
$digits = PhoneHelper::extractDigits($phone);
$isValid = PhoneHelper::validatePhone($phone);
$formatted = PhoneHelper::formatPhone($phone);
```

### В JavaScript
```javascript
import { extractDigits, validatePhone, formatPhone, isValidRussianPhone } from '@/helpers/phoneHelper';

const phone = "+79219245228";
const digits = extractDigits(phone);
const isValid = validatePhone(phone);
const formatted = formatPhone(phone);
```

## Тестирование

Для каждой функции необходимо создать тесты, проверяющие:
1. Корректную работу с валидными номерами
2. Обработку невалидных номеров
3. Работу с номерами в различных форматах
4. Граничные случаи

## Безопасность

Функции должны:
1. Проверять тип входных параметров
2. Экранировать специальные символы
3. Ограничивать длину входных строк
4. Логировать подозрительные попытки использования